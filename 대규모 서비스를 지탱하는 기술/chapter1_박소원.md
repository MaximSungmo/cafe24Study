### 대규모 서비스와 소규모 서비스

- 디스크(HDD,SSD)에서 데이터를 로드해서 메모리에 저장, 메모리에 저장된 데이터를 CPU가 fetch해서 특정 처리를 수행
- 메모리에서 fetch된 명령은 보다 빠른 cache 메모리에 캐싱됨


##### 목표: 어떻게 하면 속도가 느린 디스크의 I/O를 줄일 수 있을까?
ex) 캐싱, DB 미들웨어 구조를 속도차를 의식해서 구현

<br>


### 계속 성장하는 서비스와 대규모화의 벽

 서비스 규모가 점점 성장함에 따라 시스템 구성을 변화시킬 필요가 있다.

#### 시행착오

- 처음에는 엔지니어가 달려가서 hang-up된 서버를 재 기동하는 응급처치
- 그 후 인터넷 데이터 센터로 서버를 이전하면서 낡은 서버 모두 교체
  - OS 가상화 진행해 서버 가동률을 높임)
  - 기존 시스템 부하 상황 정리
  - 독자적인 웹 기반 서버 정보관리 시스템 개발

I/O부하가 높은 서버는 메모리를 중요시 CPU 부하가 높은 서버는 CPU를 중요시
````
- CPU 부하가 높은 경우 확인할 것 -

User / Kernel 프로그램 중 원인을 확인
프로세스 상태나 CPU 사용시간 등을 통해 원인이 되는 프로세스 확인
strace 등을 통해 병목지점을 좁혀나간다.

- I/O 부하가 높은 경우 확인할 것 -

ps로 특정 프로세스가 극단적으로 메모리를 소비하고 있는지 확인
입출력이 많아 부하가 높다면, 캐시에 필요한 메모리가 부족한 경우임. 메모리 증설 혹은 데이터분산/캐시서버 도입 등을 검토한다. 프로그램을 개선하여 I/O빈도를 줄이는 것도 검토한다.
그 외에 Swap이 발생해서 디스크 액세스가 이루어지는 경우가 있을 수 있다. 처리할 데이터량에 비례해서 메모리를 증설하는 것이 I/O부하를 줄이는 가장 효과적인 방법이다. 메모리를 증설할 수 없을 경우에는 데이터를 분할해서 각각의 서버에 위치시키는 것을 검토하여야 한다
````
